/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package GUI;

import GUI.Main;
import java.awt.geom.RoundRectangle2D;
import javax.swing.JOptionPane;
import restManager.persistencia.Orden;
import restManager.persistencia.PuestoTrabajo;
import restManager.resources.R;
import restManager.util.ComponentMover;
import restManager.util.comun;

/**
 *
 * @author Jorge
 */
public class CalcularCambio extends javax.swing.JDialog {

    /**
     * Creates new form PuestoTrabajoCrear
     */
    private Orden o;

    public CalcularCambio(java.awt.Frame parent, boolean modal, Orden o) {
        super(parent, modal);
        this.o = o;
        init(o);

    }

    public CalcularCambio(java.awt.Dialog parent, boolean modal, Orden o) {
        super(parent, modal);
        this.o = o;
        init(o);

    }

    public void init(Orden o) {

        setUndecorated(true);
        setShape(new RoundRectangle2D.Double(10, 10, 335, 225, 61, 61));
        initComponents();

        jLabelValorMontoAPagar.setText(comun.redondeoPorExceso(o.getOrdenvalorMonetario()));
        jLabelValorMontoADevolver.setText("");
        ComponentMover cr = new ComponentMover(this, panelRound1);
        this.setVisible(true);

    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        panelRound1 = new org.edisoncor.gui.panel.PanelRound();
        jTextFieldMontoBilletesCUC = new javax.swing.JTextField();
        buttonCancelar = new org.edisoncor.gui.button.ButtonAction();
        jTextFieldMontoMonedasCUC = new javax.swing.JTextField();
        jLabelNombre1 = new org.jdesktop.swingx.JXLabel();
        jLabelValorMontoAPagar = new org.jdesktop.swingx.JXLabel();
        jLabelSalarioFijo1 = new org.jdesktop.swingx.JXLabel();
        jLabelValorMontoADevolver = new org.jdesktop.swingx.JXLabel();
        jLabelNombre2 = new org.jdesktop.swingx.JXLabel();
        jLabelNombre3 = new org.jdesktop.swingx.JXLabel();
        jTextFieldMontoBilletesMN = new javax.swing.JTextField();
        jLabelNombre4 = new org.jdesktop.swingx.JXLabel();

        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);

        panelRound1.setAnchoDeBorde(0.0F);

        jTextFieldMontoBilletesCUC.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jTextFieldMontoBilletesCUCKeyPressed(evt);
            }
            public void keyReleased(java.awt.event.KeyEvent evt) {
                jTextFieldMontoBilletesCUCKeyReleased(evt);
            }
        });

        buttonCancelar.setText("Cerrar");
        buttonCancelar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                buttonCancelarActionPerformed(evt);
            }
        });

        jTextFieldMontoMonedasCUC.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jTextFieldMontoMonedasCUCKeyPressed(evt);
            }
            public void keyReleased(java.awt.event.KeyEvent evt) {
                jTextFieldMontoMonedasCUCKeyReleased(evt);
            }
        });

        jLabelNombre1.setForeground(new java.awt.Color(255, 255, 255));
        jLabelNombre1.setText("Total a pagar:");

        jLabelValorMontoAPagar.setForeground(new java.awt.Color(0, 153, 0));
        jLabelValorMontoAPagar.setText("XX.XX");

        jLabelSalarioFijo1.setForeground(new java.awt.Color(255, 255, 255));
        jLabelSalarioFijo1.setText("Monto a devolver:");

        jLabelValorMontoADevolver.setForeground(new java.awt.Color(204, 0, 0));
        jLabelValorMontoADevolver.setText("XX.XX");

        jLabelNombre2.setForeground(new java.awt.Color(255, 255, 255));
        jLabelNombre2.setText("CUC");

        jLabelNombre3.setForeground(new java.awt.Color(255, 255, 255));
        jLabelNombre3.setText(".");

        jTextFieldMontoBilletesMN.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jTextFieldMontoBilletesMNKeyPressed(evt);
            }
            public void keyReleased(java.awt.event.KeyEvent evt) {
                jTextFieldMontoBilletesMNKeyReleased(evt);
            }
        });

        jLabelNombre4.setForeground(new java.awt.Color(255, 255, 255));
        jLabelNombre4.setText("MN");

        javax.swing.GroupLayout panelRound1Layout = new javax.swing.GroupLayout(panelRound1);
        panelRound1.setLayout(panelRound1Layout);
        panelRound1Layout.setHorizontalGroup(
            panelRound1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(panelRound1Layout.createSequentialGroup()
                .addGap(75, 75, 75)
                .addGroup(panelRound1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(panelRound1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                        .addGroup(panelRound1Layout.createSequentialGroup()
                            .addComponent(jLabelSalarioFijo1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addGap(36, 36, 36)
                            .addComponent(jLabelValorMontoADevolver, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGroup(javax.swing.GroupLayout.Alignment.LEADING, panelRound1Layout.createSequentialGroup()
                            .addGap(92, 92, 92)
                            .addComponent(jLabelNombre3, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                            .addComponent(jTextFieldMontoMonedasCUC, javax.swing.GroupLayout.PREFERRED_SIZE, 31, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                            .addGroup(panelRound1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                .addComponent(jLabelNombre4, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addComponent(jLabelNombre2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))))
                    .addGroup(panelRound1Layout.createSequentialGroup()
                        .addComponent(jLabelNombre1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(58, 58, 58)
                        .addComponent(jLabelValorMontoAPagar, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addGap(33, 96, Short.MAX_VALUE))
            .addGroup(panelRound1Layout.createSequentialGroup()
                .addGroup(panelRound1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addGroup(javax.swing.GroupLayout.Alignment.LEADING, panelRound1Layout.createSequentialGroup()
                        .addGap(141, 141, 141)
                        .addComponent(buttonCancelar, javax.swing.GroupLayout.PREFERRED_SIZE, 67, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(panelRound1Layout.createSequentialGroup()
                        .addContainerGap()
                        .addGroup(panelRound1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                            .addComponent(jTextFieldMontoBilletesMN, javax.swing.GroupLayout.PREFERRED_SIZE, 66, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jTextFieldMontoBilletesCUC, javax.swing.GroupLayout.PREFERRED_SIZE, 66, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(43, 43, 43)))
                .addGap(0, 147, Short.MAX_VALUE))
        );
        panelRound1Layout.setVerticalGroup(
            panelRound1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(panelRound1Layout.createSequentialGroup()
                .addGap(25, 25, 25)
                .addGroup(panelRound1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabelNombre1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabelValorMontoAPagar, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(panelRound1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jTextFieldMontoBilletesCUC, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabelNombre2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jTextFieldMontoMonedasCUC, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabelNombre3, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(panelRound1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jTextFieldMontoBilletesMN, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabelNombre4, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(24, 24, 24)
                .addGroup(panelRound1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabelSalarioFijo1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabelValorMontoADevolver, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addComponent(buttonCancelar, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(30, Short.MAX_VALUE))
        );

        getContentPane().add(panelRound1, java.awt.BorderLayout.CENTER);

        pack();
        setLocationRelativeTo(null);
    }// </editor-fold>//GEN-END:initComponents

    private void buttonCancelarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_buttonCancelarActionPerformed
        dispose();
    }//GEN-LAST:event_buttonCancelarActionPerformed

    private void jTextFieldMontoBilletesCUCKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jTextFieldMontoBilletesCUCKeyPressed
    }//GEN-LAST:event_jTextFieldMontoBilletesCUCKeyPressed

    private void jTextFieldMontoMonedasCUCKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jTextFieldMontoMonedasCUCKeyPressed
    }//GEN-LAST:event_jTextFieldMontoMonedasCUCKeyPressed

    private void jTextFieldMontoBilletesMNKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jTextFieldMontoBilletesMNKeyPressed

    }//GEN-LAST:event_jTextFieldMontoBilletesMNKeyPressed

    private void jTextFieldMontoBilletesCUCKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jTextFieldMontoBilletesCUCKeyReleased
        actualizarVuelto();
    }//GEN-LAST:event_jTextFieldMontoBilletesCUCKeyReleased

    private void jTextFieldMontoMonedasCUCKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jTextFieldMontoMonedasCUCKeyReleased
        actualizarVuelto();
    }//GEN-LAST:event_jTextFieldMontoMonedasCUCKeyReleased

    private void jTextFieldMontoBilletesMNKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jTextFieldMontoBilletesMNKeyReleased
        actualizarVuelto();
    }//GEN-LAST:event_jTextFieldMontoBilletesMNKeyReleased


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private org.edisoncor.gui.button.ButtonAction buttonCancelar;
    private org.jdesktop.swingx.JXLabel jLabelNombre1;
    private org.jdesktop.swingx.JXLabel jLabelNombre2;
    private org.jdesktop.swingx.JXLabel jLabelNombre3;
    private org.jdesktop.swingx.JXLabel jLabelNombre4;
    private org.jdesktop.swingx.JXLabel jLabelSalarioFijo1;
    private org.jdesktop.swingx.JXLabel jLabelValorMontoADevolver;
    private org.jdesktop.swingx.JXLabel jLabelValorMontoAPagar;
    private javax.swing.JTextField jTextFieldMontoBilletesCUC;
    private javax.swing.JTextField jTextFieldMontoBilletesMN;
    private javax.swing.JTextField jTextFieldMontoMonedasCUC;
    private org.edisoncor.gui.panel.PanelRound panelRound1;
    // End of variables declaration//GEN-END:variables

    private void actualizarVuelto() {
        String billetesCUC = jTextFieldMontoBilletesCUC.getText(),
                monedasCUC = jTextFieldMontoMonedasCUC.getText(),
                billetesMN = jTextFieldMontoBilletesMN.getText();

        float montoADevolver = comun.redondeoPorExcesoFloat(o.getOrdenvalorMonetario());

        if (!isEmptyNull(billetesCUC)) {
            float a = Float.parseFloat(jTextFieldMontoBilletesCUC.getText());
            montoADevolver -= a;
        }
        if (!isEmptyNull(monedasCUC)) {
            float a = Float.parseFloat(jTextFieldMontoMonedasCUC.getText());
            a /= 100;
            montoADevolver -= a;
        }
        if (!isEmptyNull(billetesMN)) {
            float a = Float.parseFloat(jTextFieldMontoBilletesMN.getText());
            a /= R.COINCHANGE;
            montoADevolver -= a;
        }

        if (montoADevolver > 0) {
            jLabelValorMontoADevolver.setText("Falta Dinero");
        } else {
            jLabelValorMontoADevolver.setText(comun.setDosLugaresDecimales(montoADevolver));

        }

    }

    private boolean isEmptyNull(String s) {
        if (s == null) {
            return true;
        }
        return s.isEmpty();
    }
}
