/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package com.jobits.pos.ui;

import com.jhw.swing.material.components.dashboard.taskpane.DashBoardTaskPane;
import com.jobits.pos.controller.login.MainMenuController;
import com.jobits.pos.ui.presenters.AbstractViewPresenter;
import com.jhw.swing.material.components.taskpane.CollapseMenu;
import com.jhw.swing.material.components.taskpane.TaskButton;
import com.jhw.swing.material.components.taskpane.TaskPaneMainContainer;
import com.jhw.swing.material.standars.MaterialColors;
import com.jhw.swing.material.standars.MaterialIcons;
import java.awt.BorderLayout;
import java.awt.Color;
import java.util.function.Consumer;
import javax.swing.JPanel;
import javax.swing.border.LineBorder;
import javax.swing.border.MatteBorder;
import org.jdesktop.swingx.JXCollapsiblePane;

/**
 *
 * @author Jorge
 */
public class MainMenuView extends AbstractViewPanel {

    public static final String VIEW_NAME = "Menu View";

    private DashBoardTaskPane taskPane;

    public MainMenuView(AbstractViewPresenter presenter) {
        super(presenter);

    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jXTaskPaneContainer1 = new org.jdesktop.swingx.JXTaskPaneContainer();
        jXCollapsiblePane1 = new org.jdesktop.swingx.JXCollapsiblePane();

        jXTaskPaneContainer1.setMinimumSize(new java.awt.Dimension(120, 700));
        jXTaskPaneContainer1.setOpaque(false);
        jXTaskPaneContainer1.setScrollableHeightHint(org.jdesktop.swingx.ScrollableSizeHint.VERTICAL_STRETCH);
        org.jdesktop.swingx.VerticalLayout verticalLayout1 = new org.jdesktop.swingx.VerticalLayout();
        verticalLayout1.setGap(14);
        jXTaskPaneContainer1.setLayout(verticalLayout1);

        jXCollapsiblePane1.setBackground(new java.awt.Color(102, 255, 102));
        jXCollapsiblePane1.setDirection(org.jdesktop.swingx.JXCollapsiblePane.Direction.LEFT);
        jXCollapsiblePane1.setMinimumSize(new java.awt.Dimension(90, 0));
        jXCollapsiblePane1.setOpaque(false);

        setMinimumSize(new java.awt.Dimension(840, 720));
        setOpaque(false);
        setLayout(new java.awt.BorderLayout());
    }// </editor-fold>//GEN-END:initComponents


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private org.jdesktop.swingx.JXCollapsiblePane jXCollapsiblePane1;
    private org.jdesktop.swingx.JXTaskPaneContainer jXTaskPaneContainer1;
    // End of variables declaration//GEN-END:variables

    @Override
    public void wireUp() {

        CollapseMenu productoVenta = new CollapseMenu(MaterialIcons.BUSINESS.deriveIcon(35f).deriveIcon(Color.WHITE), "Productos");
        productoVenta.addMenuItem(getPresenter().getOperation(MainMenuController.MenuButtons.MENU.toString()));
        productoVenta.addMenuItem(getPresenter().getOperation(MainMenuController.MenuButtons.INSUMO.toString()));
        productoVenta.addMenuItem(getPresenter().getOperation(MainMenuController.MenuButtons.COCINA.toString()));
        productoVenta.addMenuItem(getPresenter().getOperation(MainMenuController.MenuButtons.SECCION.toString()));
        productoVenta.addMenuItem(getPresenter().getOperation(MainMenuController.MenuButtons.SALON.toString()));

        CollapseMenu almacen = new CollapseMenu(MaterialIcons.STORAGE.deriveIcon(35f).deriveIcon(Color.WHITE), "Almacén");
        almacen.addMenuItem(getPresenter().getOperation(MainMenuController.MenuButtons.ALMACEN.toString()));
        almacen.addMenuItem(getPresenter().getOperation(MainMenuController.MenuButtons.IPV.toString()));

        CollapseMenu contabilidad = new CollapseMenu(MaterialIcons.MONETIZATION_ON.deriveIcon(35f).deriveIcon(Color.WHITE), "Ventas");
        contabilidad.addMenuItem(getPresenter().getOperation(MainMenuController.MenuButtons.COMENZAR_VENTAS.toString()));
        contabilidad.addMenuItem(getPresenter().getOperation(MainMenuController.MenuButtons.VENTAS.toString()));

        CollapseMenu nominas = new CollapseMenu(MaterialIcons.ACCOUNT_BOX.deriveIcon(35f).deriveIcon(Color.WHITE), "Nóminas");
        nominas.addMenuItem(getPresenter().getOperation(MainMenuController.MenuButtons.NOMINAS.toString()));
        nominas.addMenuItem(getPresenter().getOperation(MainMenuController.MenuButtons.TRABAJADORES.toString()));
        nominas.addMenuItem(getPresenter().getOperation(MainMenuController.MenuButtons.PUESTOS_TRABAJO.toString()));

        CollapseMenu configuracion = new CollapseMenu(MaterialIcons.SETTINGS.deriveIcon(35f).deriveIcon(Color.WHITE), "Configuración");
        configuracion.addMenuItem(getPresenter().getOperation(MainMenuController.MenuButtons.CONFIGURACION.toString()));
        configuracion.addMenuItem(getPresenter().getOperation(MainMenuController.MenuButtons.COPIA_SEG.toString()));
        configuracion.addMenuItem(getPresenter().getOperation(MainMenuController.MenuButtons.LICENCIA.toString()));

        taskPane.addMainElement(productoVenta);
        taskPane.addMainElement(almacen);
        taskPane.addMainElement(contabilidad);
        taskPane.addMainElement(nominas);
        taskPane.addMainElement(configuracion);

        taskPane.format();

    }

    @Override
    public void uiInit() {
        initComponents();
        taskPane = new DashBoardTaskPane();
        taskPane.setPanelSideMenuColor(MaterialColors.WHITE);
        add(taskPane, BorderLayout.CENTER);
        ((JPanel)taskPane.getComponent(1)).setBorder(new MatteBorder(0, 0, 0, 3, DefaultValues.SECONDARY_COLOR_LIGHT));
        taskPane.setButtonFormatter(new Consumer<TaskButton>() {
            @Override
            public void accept(TaskButton t) {
                t.setDeselectedColor(MaterialColors.WHITE);
                t.setSelectedColor(DefaultValues.SECONDARY_COLOR);
                t.setMauseOverColor(DefaultValues.SECONDARY_COLOR_LIGHT);
                t.setForeground(MaterialColors.BLACK);
                t.setFont(DefaultValues.DEFAULT_FONT);
                t.repaint();
            }
        });
        taskPane.setCollapseMenuFormatter(new Consumer<CollapseMenu>() {
            @Override
            public void accept(CollapseMenu t) {
                t.setSelectedColor(DefaultValues.PRIMARY_COLOR);
                t.setDeselectedColor(MaterialColors.WHITE);
                t.setMainPanelForeground(MaterialColors.BLACK);
                t.setBorder(new LineBorder(DefaultValues.SECONDARY_COLOR_LIGHT, 1, false));
                t.setFont(DefaultValues.DEFAULT_FONT);

            }
        });

        taskPane.setMenuFormatter(new Consumer<CollapseMenu>() {
            @Override
            public void accept(CollapseMenu t) {
                t.setSelectedColor(DefaultValues.PRIMARY_COLOR);
                t.setDeselectedColor(MaterialColors.WHITE);
                t.setMainPanelForeground(MaterialColors.BLACK);
                t.setBorder(new LineBorder(DefaultValues.SECONDARY_COLOR_LIGHT, 1, false));
                t.setFont(DefaultValues.DEFAULT_FONT);
            }
        });

        taskPane.setIconShrink(MaterialIcons.ARROW_FORWARD.deriveIcon(Color.white));
        taskPane.setIconUnShrink(MaterialIcons.ARROW_BACK.deriveIcon(Color.white));
    }

    @Override
    public String getViewName() {
        return VIEW_NAME;
    }

    public JXCollapsiblePane getCollapse() {
        return jXCollapsiblePane1;
    }

    public DashBoardTaskPane getTaskPane() {
        return taskPane;
    }

}
